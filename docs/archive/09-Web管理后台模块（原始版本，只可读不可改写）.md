# Webç®¡ç†åå°æ¨¡å—æŠ€æœ¯æ–‡æ¡£

## æ¨¡å—æ¦‚è¿°

Webç®¡ç†åå°æ¨¡å—æ˜¯GGbondCJé¡¹ç›®çš„åŸºç¡€ç®¡ç†ç•Œé¢ç»„ä»¶ï¼ŒåŸºäºFastHTMLæ¡†æ¶æ„å»ºï¼Œæä¾›ç®€å•ç›´è§‚çš„å•†æˆ·ã€è®¢å•ã€é…ç½®ç­‰ç®¡ç†åŠŸèƒ½ã€‚è¯¥æ¨¡å—å®ç°äº†åŸºç¡€çš„è®¤è¯ã€æ•°æ®å±•ç¤ºå’Œé…ç½®ç®¡ç†ï¼Œä¸ºç®¡ç†å‘˜æä¾›å¯è§†åŒ–çš„ç³»ç»Ÿç®¡ç†å·¥å…·ã€‚

### ä¸šåŠ¡ä»·å€¼
- æä¾›å¯è§†åŒ–çš„ç³»ç»Ÿç®¡ç†ç•Œé¢
- æ”¯æŒå•†æˆ·ã€è®¢å•ã€ç»‘å®šç ç­‰æ•°æ®ç®¡ç†
- å®ç°åŸºç¡€çš„ç”¨æˆ·è®¤è¯å’Œä¼šè¯ç®¡ç†
- æä¾›ç³»ç»Ÿé…ç½®å’Œæ¨¡æ¿ç®¡ç†åŠŸèƒ½

## ç³»ç»Ÿæ¶æ„è®¾è®¡

### æ ¸å¿ƒç»„ä»¶æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Webç®¡ç†åå°æ¨¡å—                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   FastHTML      â”‚  â”‚   AuthManager   â”‚  â”‚  OKXä¸»é¢˜UI    â”‚  â”‚
â”‚  â”‚   Webæ¡†æ¶       â”‚  â”‚   è®¤è¯ç®¡ç†å™¨    â”‚  â”‚   ç•Œé¢ç»„ä»¶    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        è·¯ç”±å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ä»ªè¡¨æ¿è·¯ç”±     â”‚  â”‚  æ•°æ®ç®¡ç†è·¯ç”±   â”‚  â”‚  é…ç½®ç®¡ç†è·¯ç”± â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        è§†å›¾å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ create_layout   â”‚  â”‚ create_card     â”‚  â”‚  è¡¨å•ç»„ä»¶     â”‚  â”‚
â”‚  â”‚   å¸ƒå±€æ¨¡æ¿      â”‚  â”‚   å¡ç‰‡ç»„ä»¶      â”‚  â”‚   è¾“å…¥æ§ä»¶    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯æ ˆ

### 1. æ ¸å¿ƒæ¡†æ¶
```python
# FastHTML - ç°ä»£åŒ–çš„Python Webæ¡†æ¶
app = FastHTML(
    hdrs=[
        daisyui_css,        # DaisyUI CSSæ¡†æ¶
        tailwind_css,       # TailwindCSS
        okx_theme_css,      # OKXä¸»é¢˜æ ·å¼
        okx_mobile_js,      # ç§»åŠ¨ç«¯æ”¯æŒ
        Meta(name="viewport", content="width=device-width, initial-scale=1.0, user-scalable=1"),
        Title("å•†å®¶ç®¡ç†é¢æ¿")
    ]
)
```

### 2. UIè®¾è®¡ç³»ç»Ÿ
- **DaisyUI + TailwindCSS**: ç°ä»£åŒ–çš„CSSæ¡†æ¶ç»„åˆ
- **OKXä¸»é¢˜**: è‡ªå®šä¹‰çš„æ·±è‰²ä¸»é¢˜é£æ ¼
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- **ç»„ä»¶åŒ–å¼€å‘**: å¯å¤ç”¨çš„UIç»„ä»¶

## æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½

### 1. è®¤è¯ç³»ç»Ÿ (AuthManager)

#### ç®€å•çš„å¯†ç è®¤è¯
```python
class AuthManager:
    """è®¤è¯ç®¡ç†å™¨"""
    
    @staticmethod
    def hash_password(password: str) -> str:
        """å¯†ç å“ˆå¸Œ"""
        return hashlib.sha256(password.encode()).hexdigest()
    
    @staticmethod
    def verify_password(password: str, hashed: str) -> bool:
        """éªŒè¯å¯†ç """
        return AuthManager.hash_password(password) == hashed
    
    @staticmethod
    def is_authenticated(request) -> bool:
        """æ£€æŸ¥æ˜¯å¦å·²è®¤è¯"""
        return request.session.get("authenticated", False)
    
    @staticmethod
    def login(request, password: str) -> bool:
        """ç™»å½•éªŒè¯"""
        if AuthManager.verify_password(password, AuthManager.hash_password(WEB_CONFIG["admin_password"])):
            request.session["authenticated"] = True
            request.session["login_time"] = datetime.now().isoformat()
            return True
        return False
```

#### è®¤è¯è£…é¥°å™¨
```python
def require_auth(func):
    """è®¤è¯è£…é¥°å™¨ï¼Œä¿æŠ¤éœ€è¦ç™»å½•çš„é¡µé¢"""
    @functools.wraps(func)
    async def wrapper(request):
        if not AuthManager.is_authenticated(request):
            # é‡å®šå‘åˆ°ç™»å½•é¡µé¢
            return RedirectResponse(url="/login", status_code=302)
        return await func(request)
    return wrapper
```

### 2. ä»ªè¡¨æ¿åŠŸèƒ½ (Dashboard)

#### ç»Ÿè®¡æ•°æ®å±•ç¤º
```python
@app.get("/")
@require_auth
async def dashboard(request):
    """ä»ªè¡¨æ¿é¡µé¢"""
    try:
        # è·å–å•†å®¶ç»Ÿè®¡æ•°æ®
        merchant_stats = await MerchantManager.get_merchant_statistics()
        total_merchants = merchant_stats.get("total_merchants", 0)
        active_merchants = merchant_stats.get("by_status", {}).get("active", 0)
        
        # è·å–7æ­¥æµç¨‹ç›¸å…³ç»Ÿè®¡
        merchant_type_stats = await get_merchant_type_statistics()
        
        # åœ°åŒºç»Ÿè®¡
        province_count = await ProvinceDatabase.count_provinces()
        region_count = await RegionDatabase.count_regions()
        keyword_count = await KeywordDatabase.count_keywords()
        
        # ç»‘å®šç ç»Ÿè®¡
        binding_stats = await BindingCodesDatabase.get_binding_code_statistics()
        
        # 7æ­¥æµç¨‹å®Œæˆåº¦ç»Ÿè®¡
        complete_merchants = 0
        all_merchants_data = await get_all_merchants()
        for merchant in all_merchants_data:
            # æ£€æŸ¥7æ­¥æµç¨‹æ˜¯å¦å®Œæ•´
            if all([
                merchant.get('merchant_type'),
                merchant.get('province_id'),
                merchant.get('region_id'),
                merchant.get('p_price') is not None,
                merchant.get('pp_price') is not None,
                merchant.get('keywords'),
                merchant.get('custom_description')
            ]):
                complete_merchants += 1
        
        completion_rate = round((complete_merchants / total_merchants * 100) if total_merchants > 0 else 0, 1)
        
        # åˆ›å»ºç»Ÿè®¡å¡ç‰‡ç½‘æ ¼
        stats_grid = Div(
            # åŸºç¡€ç»Ÿè®¡
            create_stats_card("æ€»å•†å®¶æ•°", str(total_merchants), "ç´¯è®¡æ³¨å†Œå•†å®¶", "ğŸª", "+5.2%"),
            create_stats_card("æ´»è·ƒå•†å®¶", str(active_merchants), "å½“å‰è¿è¥ä¸­å•†å®¶", "âœ…", f"{active_merchants}/{total_merchants}"),
            create_stats_card("ç»‘å®šç ", str(binding_stats.get("total_codes", 0)), "ç´¯è®¡ç”Ÿæˆç»‘å®šç ", "ğŸ”—", f"+{binding_stats.get('unused_codes', 0)} æœªä½¿ç”¨"),
            create_stats_card("ç³»ç»ŸçŠ¶æ€", "åœ¨çº¿", "æœåŠ¡è¿è¡Œæ­£å¸¸", "ğŸš€", "99.9%"),
            
            # 7æ­¥æµç¨‹ç»Ÿè®¡
            create_stats_card("å®Œæˆåº¦", f"{completion_rate}%", "7æ­¥æµç¨‹å®Œæ•´å•†å®¶æ¯”ç‡", "ğŸ“‹", f"{complete_merchants}/{total_merchants}"),
            create_stats_card("çœä»½æ•°", str(province_count), "å¯é€‰æ‹©çœä»½æ•°é‡", "ğŸ—ºï¸", f"{region_count} ä¸ªåŒºåŸŸ"),
            create_stats_card("å…³é”®è¯", str(keyword_count), "æœåŠ¡å…³é”®è¯æ€»æ•°", "ğŸ·ï¸", "åˆ†ç±»ç®¡ç†"),
            create_stats_card("æµç¨‹çŠ¶æ€", "è¿è¡Œä¸­", "7æ­¥ç»‘å®šæµç¨‹çŠ¶æ€", "âš¡", "è‡ªåŠ¨åŒ–"),
            
            cls="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12"
        )
        
        return create_layout("ä»ªè¡¨æ¿", Div(stats_grid, flow_stats_section, merchant_cards))
```

### 3. å¸ƒå±€ç³»ç»Ÿ (Layout System)

#### ç»Ÿä¸€é¡µé¢å¸ƒå±€
```python
def create_layout(title: str, content, show_nav: bool = True):
    """
    åˆ›å»ºOKXé£æ ¼çš„é¡µé¢å¸ƒå±€
    
    Args:
        title: é¡µé¢æ ‡é¢˜
        content: é¡µé¢å†…å®¹
        show_nav: æ˜¯å¦æ˜¾ç¤ºå¯¼èˆªæ 
    """
    nav = None
    if show_nav:
        nav = Div(
            # å·¦ä¾§å“ç‰Œæ ‡è¯†
            A("å•†å®¶ç®¡ç†", href="/", 
              cls="text-2xl font-bold text-white hover:text-green-400 transition-colors duration-200"),
            
            # ä¸­é—´å¯¼èˆªèœå•ï¼ˆæ¡Œé¢ç«¯ï¼‰
            Div(
                A("ä»ªè¡¨æ¿", href="/", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                A("å•†å®¶ç®¡ç†", href="/merchants", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                A("è®¢å•ç®¡ç†", href="/orders", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                A("ç»‘å®šç ", href="/codes", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                A("åœ°åŒºç®¡ç†", href="/regions", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                A("å…³é”®è¯ç®¡ç†", href="/keywords", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                A("æ¨¡æ¿", href="/templates", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                A("è‡ªåŠ¨å›å¤", href="/auto-reply", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                A("è®¢é˜…ç®¡ç†", href="/subscriptions", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                A("é…ç½®", href="/config", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                A("æ—¥å¿—", href="/logs", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                cls="hidden lg:flex gap-2"
            ),
            
            # å³ä¾§ç”¨æˆ·èœå•ï¼ˆç§»åŠ¨ç«¯ä¸‹æ‹‰èœå•ï¼‰
            Div(
                A("èœå•", tabindex="0", role="button", cls="text-white hover:text-green-400 transition-colors duration-200 px-5 py-3 text-base"),
                Div(
                    # æ‰€æœ‰å¯¼èˆªé¡¹çš„ç§»åŠ¨ç«¯ç‰ˆæœ¬
                    A("ä»ªè¡¨æ¿", href="/", cls="hover:bg-gray-700 px-5 py-3 rounded text-white text-base"),
                    # ... å…¶ä»–å¯¼èˆªé¡¹
                    Div(cls="divider my-3 border-gray-600"),
                    A("ç™»å‡º", href="/logout", cls="hover:bg-red-700 px-5 py-3 rounded text-red-400 text-base"),
                    cls="menu bg-gray-800 rounded-box z-50 w-64 p-3 border border-gray-700 dropdown-content",
                    tabindex="0"
                ),
                cls="dropdown dropdown-end"
            ),
            
            cls="navbar glass-effect sticky top-0 z-40 border-b border-gray-800 justify-between px-8 py-4"
        )
```

## ä¸»è¦ç®¡ç†åŠŸèƒ½

### 1. å•†å®¶ç®¡ç†
```python
@app.get("/merchants")
@require_auth
async def merchants_list(request):
    """å•†å®¶åˆ—è¡¨é¡µé¢"""
    try:
        # è·å–æŸ¥è¯¢å‚æ•°
        status_filter = request.query_params.get("status")
        search_term = request.query_params.get("search", "").strip()
        
        # è·å–å•†å®¶åˆ—è¡¨
        if search_term:
            merchants = await MerchantManager.search_merchants(search_term, status_filter)
        else:
            merchants = await MerchantManager.get_all_merchants(status_filter)
        
        # åˆ›å»ºç­›é€‰å™¨
        filter_section = Div(
            Div(
                H2("å•†å®¶ç®¡ç†", cls="text-2xl font-bold"),
                Div(
                    A("ç”Ÿæˆç»‘å®šç ", href="/codes/generate", cls="btn btn-primary"),
                    cls="flex gap-2"
                ),
                cls="flex justify-between items-center mb-4"
            ),
            Div(
                Form(
                    Div(
                        Input(
                            type="text",
                            name="search", 
                            placeholder="æœç´¢å•†å®¶åç§°...",
                            value=search_term,
                            cls="input flex-1"
                        ),
                        Select(
                            Option("å…¨éƒ¨çŠ¶æ€", value=""),
                            Option("æ´»è·ƒ", value="active"),
                            Option("æš‚åœ", value="inactive"), 
                            Option("å¾…å®¡æ ¸", value="pending"),
                            name="status",
                            cls="select"
                        ),
                        Button("æœç´¢", type="submit", cls="btn btn-primary"),
                        cls="flex gap-2"
                    ),
                    method="get",
                    cls="w-full"
                ),
                cls="mb-6"
            )
        )
        
        return create_layout("å•†å®¶ç®¡ç†", content)
```

### 2. æ¨¡æ¿ç®¡ç†
```python
@app.get("/templates")
@require_auth
async def templates_management(request):
    """æ¨¡æ¿ç®¡ç†é¡µé¢"""
    try:
        # è·å–å½“å‰æ¨¡æ¿é…ç½®ï¼ˆå®æ—¶ä»æ¨¡æ¿ç®¡ç†å™¨è·å–ï¼‰
        from template_manager import TemplateManager
        templates = TemplateManager.get_all_templates() if TemplateManager.is_initialized() else MESSAGE_TEMPLATES
        
        # ä»æ•°æ®é…ç½®è·å–æ¨¡æ¿åˆ†ç±»
        template_categories = web_data_config.get_template_categories()
        
        # åˆ›å»ºæ¨¡æ¿å¡ç‰‡
        template_sections = []
        for category, template_list in template_categories.items():
            cards = []
            for template_key, template_name in template_list:
                template_value = templates.get(template_key, "")
                
                card = Div(
                    Div(
                        H3(template_name, cls="text-lg font-semibold mb-2"),
                        P(f"æ¨¡æ¿é”®: {template_key}", cls="text-sm text-gray-400 mb-3"),
                        Div(
                            template_value[:100] + "..." if len(template_value) > 100 else template_value,
                            cls="text-sm bg-gray-800 p-3 rounded mb-3 font-mono"
                        ),
                        Div(
                            A("ç¼–è¾‘", href=f"/templates/{template_key}/edit", cls="btn btn-primary btn-sm"),
                            Button("é¢„è§ˆ", cls="btn btn-secondary btn-sm ml-2", 
                                   onclick=f"showPreview('{template_key}')"),
                            cls="flex gap-2"
                        ),
                        cls="p-8"
                    ),
                    cls="card"
                )
                cards.append(card)
```

### 3. è‡ªåŠ¨å›å¤ç®¡ç†
```python
@app.get("/auto-reply")
@require_auth
async def auto_reply_manage(request):
    """è‡ªåŠ¨å›å¤ç®¡ç†é¡µé¢"""
    try:
        # è·å–æ‰€æœ‰è§¦å‘å™¨
        triggers = await auto_reply_manager.get_all_auto_replies()
        
        # åˆ›å»ºè§¦å‘å™¨å¡ç‰‡
        trigger_cards = []
        for trigger in triggers:
            card = create_trigger_card(trigger)
            trigger_cards.append(card)
        
        # è·å–ç»Ÿè®¡ä¿¡æ¯
        stats = await get_detailed_auto_reply_stats()
        
        content = Div(
            # é¡¶éƒ¨æ“ä½œåŒºåŸŸ
            Div(
                H1("è‡ªåŠ¨å›å¤ç®¡ç†", cls="text-3xl font-bold"),
                Div(
                    Button("æ–°å»ºè§¦å‘å™¨", cls="btn btn-primary", onclick="showCreateTriggerModal()"),
                    Button("é‡æ–°åŠ è½½ç¼“å­˜", cls="btn btn-secondary ml-2", 
                           hx_post="/auto-reply/reload-cache", hx_swap="outerHTML", hx_target="#cache-status"),
                    cls="flex gap-2"
                ),
                cls="flex justify-between items-center mb-6"
            ),
            
            # ç»Ÿè®¡ä¿¡æ¯
            Div(
                create_stats_card("æ€»è§¦å‘å™¨", str(stats.get("total_triggers", 0)), "å·²åˆ›å»ºçš„è§¦å‘å™¨æ€»æ•°", "ğŸ¯", ""),
                create_stats_card("æ´»è·ƒè§¦å‘å™¨", str(stats.get("active_triggers", 0)), "å½“å‰å¯ç”¨çš„è§¦å‘å™¨", "âœ…", ""),
                create_stats_card("ä»Šæ—¥è§¦å‘", str(stats.get("today_triggers", 0)), "ä»Šå¤©è§¦å‘çš„æ¬¡æ•°", "ğŸ“Š", ""),
                create_stats_card("ç¼“å­˜çŠ¶æ€", "æ­£å¸¸" if stats.get("cache_healthy", True) else "å¼‚å¸¸", "è§¦å‘å™¨ç¼“å­˜çŠ¶æ€", "ğŸ’¾", ""),
                cls="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"
            ),
            
            # è§¦å‘å™¨åˆ—è¡¨
            Div(
                H2("è§¦å‘å™¨åˆ—è¡¨", cls="text-xl font-bold mb-4"),
                Div(
                    *trigger_cards if trigger_cards else [Div("æš‚æ— è§¦å‘å™¨", cls="text-center py-8 text-gray-400")],
                    cls="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",
                    id="triggers-container"
                )
            ),
        )
        
        return create_layout("è‡ªåŠ¨å›å¤ç®¡ç†", Div(content, create_simple_auto_reply_js()))
```

## UIç»„ä»¶ç³»ç»Ÿ

### 1. åŸºç¡€è¡¨å•ç»„ä»¶
```python
def okx_button(text: str, **attrs):
    """OKXé£æ ¼æŒ‰é’®"""
    default_class = "btn bg-green-500 hover:bg-green-600 border-green-500 text-white font-medium"
    cls = attrs.pop('cls', default_class)
    return Button(text, cls=cls, **attrs)

def okx_input(placeholder: str = "", **attrs):
    """OKXé£æ ¼è¾“å…¥æ¡†"""
    default_class = "input input-bordered bg-gray-800 border-gray-700 text-white placeholder-gray-400 focus:border-green-500"
    cls = attrs.pop('cls', default_class)
    return Input(placeholder=placeholder, cls=cls, **attrs)

def okx_textarea(placeholder: str = "", **attrs):
    """OKXé£æ ¼æ–‡æœ¬åŒºåŸŸ"""
    default_class = "textarea textarea-bordered bg-gray-800 border-gray-700 text-white placeholder-gray-400 focus:border-green-500"
    cls = attrs.pop('cls', default_class)
    return Textarea(placeholder=placeholder, cls=cls, **attrs)

def okx_select(options: list, **attrs):
    """OKXé£æ ¼ä¸‹æ‹‰é€‰æ‹©"""
    default_class = "select select-bordered bg-gray-800 border-gray-700 text-white focus:border-green-500"
    cls = attrs.pop('cls', default_class)
    return Select(*options, cls=cls, **attrs)
```

### 2. å¡ç‰‡ç»„ä»¶
```python
def create_stats_card(title: str, value: str, description: str, icon: str = "", trend: str = ""):
    """åˆ›å»ºç»Ÿè®¡å¡ç‰‡"""
    return Div(
        Div(
            Div(
                Span(icon, cls="text-2xl"),
                Div(
                    H3(title, cls="text-sm font-medium text-gray-400"),
                    P(value, cls="text-2xl font-bold text-white mt-1"),
                    cls="ml-3"
                ),
                cls="flex items-center"
            ),
            P(description, cls="text-xs text-gray-500 mt-3"),
            Div(
                Span(trend, cls="text-xs text-green-400 font-medium") if trend else "",
                cls="mt-2"
            ),
            cls="p-6"
        ),
        cls="card bg-gray-800/30 backdrop-blur-sm border border-gray-700/50 hover:border-green-500/30 transition-all duration-300"
    )

async def create_merchant_card(merchant: dict):
    """åˆ›å»ºå•†å®¶å¡ç‰‡"""
    # è·å–çœä»½åç§°
    province_name = "æœªçŸ¥çœä»½"
    if merchant.get('province_id'):
        province = await ProvinceDatabase.get_province_by_id(merchant['province_id'])
        province_name = province['name'] if province else "æœªçŸ¥çœä»½"
    
    # è·å–åŒºåŸŸåç§°
    region_name = "æœªçŸ¥åŒºåŸŸ"
    if merchant.get('region_id'):
        region = await RegionDatabase.get_region_by_id(merchant['region_id'])
        region_name = region['name'] if region else "æœªçŸ¥åŒºåŸŸ"
    
    # çŠ¶æ€æ ·å¼
    status = merchant.get('status', 'unknown')
    status_styles = {
        'active': 'bg-green-500 text-white',
        'inactive': 'bg-red-500 text-white', 
        'pending': 'bg-yellow-500 text-black'
    }
    status_text = {'active': 'æ´»è·ƒ', 'inactive': 'æš‚åœ', 'pending': 'å¾…å®¡æ ¸'}.get(status, 'æœªçŸ¥')
    
    return Div(
        Div(
            # å•†å®¶åŸºæœ¬ä¿¡æ¯
            Div(
                H3(merchant.get('name', 'æœªå‘½åå•†å®¶'), cls="text-lg font-bold text-white mb-2"),
                Span(status_text, cls=f"badge {status_styles.get(status, 'bg-gray-500 text-white')} text-xs"),
                cls="flex justify-between items-start mb-4"
            ),
            
            # å•†å®¶è¯¦ç»†ä¿¡æ¯
            Div(
                Div(
                    Span("ç±»å‹:", cls="text-gray-400 text-sm"),
                    Span({'teacher': 'è€å¸ˆ', 'business': 'å•†å®¶'}.get(merchant.get('merchant_type'), 'æœªè®¾ç½®'), 
                         cls="text-white text-sm ml-2")
                ),
                Div(
                    Span("åœ°åŒº:", cls="text-gray-400 text-sm"),
                    Span(f"{province_name} - {region_name}", cls="text-white text-sm ml-2")
                ),
                Div(
                    Span("ä»·æ ¼:", cls="text-gray-400 text-sm"),
                    Span(f"P:{merchant.get('p_price', 'N/A')} PP:{merchant.get('pp_price', 'N/A')}", 
                         cls="text-white text-sm ml-2")
                ),
                cls="space-y-2 mb-4"
            ),
            
            # æ“ä½œæŒ‰é’®
            Div(
                A("ç¼–è¾‘", href=f"/merchants/{merchant['id']}/edit", cls="btn btn-primary btn-sm"),
                Button("åˆ‡æ¢çŠ¶æ€", cls="btn btn-secondary btn-sm ml-2",
                       hx_post=f"/merchants/{merchant['id']}/toggle-status",
                       hx_swap="outerHTML", hx_target=f"#merchant-{merchant['id']}"),
                cls="flex gap-2"
            ),
            
            cls="p-6"
        ),
        cls="card bg-gray-800/30 backdrop-blur-sm border border-gray-700/50 hover:border-green-500/30 transition-all duration-300",
        id=f"merchant-{merchant['id']}"
    )
```

## é…ç½®å’Œéƒ¨ç½²

### 1. åº”ç”¨é…ç½®
```python
def create_app():
    """åˆ›å»ºå¹¶è¿”å›FastHTMLåº”ç”¨å®ä¾‹"""
    return app

def start_web_app():
    """å¯åŠ¨Webåº”ç”¨"""
    logger.info("æ­£åœ¨å¯åŠ¨Webç®¡ç†ç•Œé¢...")
    logger.info("=" * 50)
    logger.info("ğŸŒ GGbondCJ Webç®¡ç†é¢æ¿")
    logger.info(f"ğŸ“ è®¿é—®åœ°å€: http://{WEB_CONFIG['host']}:{WEB_CONFIG['port']}")
    logger.info(f"ğŸ” ç®¡ç†å‘˜å¯†ç å·²é…ç½®")
    logger.info(f"ğŸ“± æ”¯æŒç§»åŠ¨ç«¯è®¿é—®")
    logger.info(f"ğŸ¨ ä½¿ç”¨OKXæ·±è‰²ä¸»é¢˜")
    logger.info("=" * 50)
    
    import uvicorn
    uvicorn.run(
        app,
        host=WEB_CONFIG["host"], 
        port=WEB_CONFIG["port"],
        log_level="info"
    )
```

### 2. é™æ€æ–‡ä»¶æœåŠ¡
```python
# é™æ€æ–‡ä»¶æœåŠ¡
from starlette.staticfiles import StaticFiles
app.mount("/static", StaticFiles(directory="static"), name="static")
```

### 3. ä¼šè¯ç®¡ç†
- åŸºäºStarlette Sessionsçš„ç®€å•ä¼šè¯ç®¡ç†
- SHA256å¯†ç å“ˆå¸Œ
- ç™»å½•çŠ¶æ€æŒä¹…åŒ–
- ä¼šè¯è¶…æ—¶æ§åˆ¶

## å®é™…åŠŸèƒ½æ€»ç»“

### æ ¸å¿ƒåŠŸèƒ½ç‰¹ç‚¹
- âœ… åŸºäºFastHTMLçš„ç°ä»£Webæ¡†æ¶
- âœ… DaisyUI + TailwindCSSå“åº”å¼è®¾è®¡
- âœ… OKXæ·±è‰²ä¸»é¢˜å®šåˆ¶
- âœ… ç®€å•çš„å¯†ç è®¤è¯ç³»ç»Ÿ
- âœ… å•†å®¶ã€è®¢å•ã€é…ç½®ç­‰åŸºç¡€ç®¡ç†åŠŸèƒ½
- âœ… æ¨¡æ¿å’Œè‡ªåŠ¨å›å¤ç®¡ç†
- âœ… ç»Ÿè®¡æ•°æ®å¯è§†åŒ–å±•ç¤º
- âœ… ç§»åŠ¨ç«¯é€‚é…æ”¯æŒ

### æŠ€æœ¯ç‰¹ç‚¹
- âœ… åŸºäºPythonçš„FastHTMLæ¡†æ¶
- âœ… å‰åç«¯ä¸€ä½“åŒ–å¼€å‘
- âœ… ç»„ä»¶åŒ–UIè®¾è®¡
- âœ… HTMXå¢å¼ºäº¤äº’
- âœ… å¼‚æ­¥æ•°æ®åº“é›†æˆ
- âœ… é™æ€æ–‡ä»¶æœåŠ¡
- âœ… ä¼šè¯çŠ¶æ€ç®¡ç†

### é™åˆ¶
- âŒ æ— å¤æ‚çš„æƒé™ç®¡ç†ç³»ç»Ÿ
- âŒ æ— é«˜çº§æ•°æ®åˆ†æåŠŸèƒ½
- âŒ æ— å¤šç”¨æˆ·ç®¡ç†
- âŒ æ— APIæ¥å£
- âŒ æ— å®æ—¶æ•°æ®æ¨é€

## è·¯ç”±ç»“æ„

### ä¸»è¦è·¯ç”±åˆ—è¡¨
```python
# è®¤è¯ç›¸å…³
GET  /login          # ç™»å½•é¡µé¢
POST /login          # ç™»å½•å¤„ç†
GET  /logout         # ç™»å‡º

# ä»ªè¡¨æ¿
GET  /               # ä»ªè¡¨æ¿é¦–é¡µ

# æ•°æ®ç®¡ç†
GET  /merchants      # å•†å®¶åˆ—è¡¨
GET  /orders         # è®¢å•åˆ—è¡¨
GET  /codes          # ç»‘å®šç ç®¡ç†
GET  /logs           # æ´»åŠ¨æ—¥å¿—

# é…ç½®ç®¡ç†
GET  /templates      # æ¨¡æ¿ç®¡ç†
GET  /auto-reply     # è‡ªåŠ¨å›å¤ç®¡ç†
GET  /subscriptions  # è®¢é˜…ç®¡ç†
GET  /config         # ç³»ç»Ÿé…ç½®

# åŸºç¡€æ•°æ®
GET  /regions        # åœ°åŒºç®¡ç†
GET  /keywords       # å…³é”®è¯ç®¡ç†
```

## æ€»ç»“

Webç®¡ç†åå°æ¨¡å—æ˜¯ä¸€ä¸ªåŸºäºFastHTMLæ¡†æ¶çš„è½»é‡çº§ç®¡ç†ç•Œé¢ç³»ç»Ÿï¼Œä¸»è¦åŠŸèƒ½æ˜¯ä¸ºGGbondCJé¡¹ç›®æä¾›å¯è§†åŒ–çš„æ•°æ®ç®¡ç†å’Œç³»ç»Ÿé…ç½®åŠŸèƒ½ã€‚è¯¥æ¨¡å—é‡‡ç”¨ç°ä»£åŒ–çš„å‰ç«¯æŠ€æœ¯æ ˆï¼Œæä¾›ç›´è§‚å‹å¥½çš„ç”¨æˆ·ç•Œé¢ï¼Œèƒ½å¤Ÿæ»¡è¶³åŸºæœ¬çš„åå°ç®¡ç†éœ€æ±‚ã€‚

---

*æœ¬æ–‡æ¡£åŸºäºGGbondCJé¡¹ç›®v1.0ï¼Œæœ€åæ›´æ–°æ—¶é—´ï¼š2024å¹´12æœˆ*